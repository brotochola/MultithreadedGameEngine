<html>


<script>



    class GameObject {
        static numGameObjects = 1000000
        static x = new Float32Array(this.numGameObjects);
        static y = new Float32Array(this.numGameObjects);
        static vx = new Float32Array(this.numGameObjects);
        static vy = new Float32Array(this.numGameObjects);
        static ax = new Float32Array(this.numGameObjects);
        static ay = new Float32Array(this.numGameObjects);
        static rotation = new Float32Array(this.numGameObjects);
        static velocityAngle = new Float32Array(this.numGameObjects);
        static speed = new Float32Array(this.numGameObjects);


        static init() {
            for (let i = 0; i < this.numGameObjects; i++) {
                this.x[i] = Math.random() * 1000
                this.y[i] = Math.random() * 1000
                this.vx[i] = Math.random() * 10
                this.vy[i] = Math.random() * 10
                this.ax[i] = 0
                this.ay[i] = 0
            }
        }

        constructor() {

            this.x = Math.random() * 1000
            this.y = Math.random() * 1000
            this.vx = Math.random() * 10
            this.vy = Math.random() * 10
            this.ax = 0
            this.ay = 0


        }
        tick(dtRatio) {
            this.vx += this.ax * dtRatio
            this.vy += this.ay * dtRatio
            this.x += this.vx * dtRatio
            this.y += this.vy * dtRatio

            this.ax = 0
            this.ay = 0
            this.velocityAngle = Math.atan2(this.vy, this.vx) + Math.PI / 2
            this.speed = Math.sqrt(this.vx * this.vx + this.vy * this.vy)
        }

        static tick(i, dtRatio) {


            this.vx[i] += this.ax[i] * dtRatio;
            this.vy[i] += this.ay[i] * dtRatio;
            this.x[i] += this.vx[i] * dtRatio;
            this.y[i] += this.vy[i] * dtRatio;
            this.ax[i] = 0;
            this.ay[i] = 0;


            this.velocityAngle[i] = Math.atan2(this.vy[i], this.vx[i]) + Math.PI / 2;
            this.speed[i] = Math.sqrt(this.vx[i] * this.vx[i] + this.vy[i] * this.vy[i]);



        }

        static tickAll(dtRatio) {

            for (let i = 0; i < this.numGameObjects; i++) {
                this.tick(i, dtRatio);
            }
        }



    }
    const USE_ARRAYS = true
    //////
    let lastTime = performance.now()
    let deltaTime = 0
    let dtRatio = 0
    let fps = 16
    let gameObjects = []


    if (USE_ARRAYS) GameObject.init()
    else {
        for (let i = 0; i < GameObject.numGameObjects; i++) {
            gameObjects.push(new GameObject())
        }
    }



    function gameLoop() {
        deltaTime = performance.now() - lastTime
        lastTime = performance.now()
        dtRatio = deltaTime / (16.667)
        fps = 1000 / deltaTime
        if (USE_ARRAYS)
            GameObject.tickAll(dtRatio)
        else {
            for (let i = 0; i < gameObjects.length; i++) {
                gameObjects[i].tick(dtRatio)
            }
        }

        requestAnimationFrame(gameLoop)
    }

    gameLoop(0)

</script>

</html>